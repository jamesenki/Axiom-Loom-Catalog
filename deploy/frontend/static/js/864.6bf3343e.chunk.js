"use strict";(self.webpackChunkaxiom_loom_catalog=self.webpackChunkaxiom_loom_catalog||[]).push([[864],{31864:(e,s,t)=>{t.r(s),t.d(s,{default:()=>c});var r=t(65043),a=t(35475),l=t(79204),i=t(67375),n=t(70579);const c=()=>{const[e,s]=(0,r.useState)({isRunning:!1,totalRepos:0,completedRepos:0,percentage:0,errors:[]}),[t,c]=(0,r.useState)(null),[o,d]=(0,r.useState)(!1),[m,x]=(0,r.useState)(!0),{updateSyncResult:h}=(0,i.g)();(0,r.useEffect)(()=>{const e=l.t.getLastSyncInfo();e.result&&e.timestamp&&c({...e.result,timestamp:e.timestamp})},[]);return(0,n.jsxs)("div",{className:"repository-sync p-8 max-w-4xl mx-auto",children:[(0,n.jsxs)("div",{className:"mb-8",children:[(0,n.jsx)(a.N_,{to:"/",className:"text-blue-400 hover:text-blue-300 mb-4 inline-block",children:"\u2190 Back to Repositories"}),(0,n.jsx)("h1",{className:"text-3xl font-bold text-white mb-4",children:"\ud83d\udd04 Repository Sync"}),(0,n.jsx)("p",{className:"text-gray-300",children:"Synchronize all repositories from the GitHub account to ensure you have the latest content."})]}),(0,n.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 mb-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-xl font-semibold text-white mb-2",children:"Manual Sync"}),t&&(0,n.jsxs)("p",{className:"text-sm text-gray-400",children:["Last sync: ",(e=>{try{const s=e instanceof Date?e:new Date(e);return isNaN(s.getTime())?"Never":new Intl.DateTimeFormat("en-US",{dateStyle:"medium",timeStyle:"short"}).format(s)}catch(s){return"Never"}})(t.timestamp)]}),(0,n.jsxs)("label",{className:"flex items-center gap-2 mt-2",children:[(0,n.jsx)("input",{type:"checkbox",checked:m,onChange:e=>x(e.target.checked),disabled:e.isRunning,className:"rounded border-gray-600 bg-gray-700 text-blue-500"}),(0,n.jsx)("span",{className:"text-sm text-gray-300",children:"Limit to 10 repositories (faster testing)"})]})]}),(0,n.jsx)("button",{onClick:async()=>{if(!e.isRunning){s({isRunning:!0,totalRepos:0,completedRepos:0,percentage:0,errors:[]}),d(!0);try{const e=setInterval(async()=>{const e=await l.t.getSyncStatus();s({isRunning:e.isInProgress,currentRepo:e.currentRepository,totalRepos:e.totalRepositories,completedRepos:e.completedRepositories,percentage:e.totalRepositories>0?Math.round(e.completedRepositories/e.totalRepositories*100):0,errors:e.errors})},500),t=await l.t.startSync(m?10:void 0);clearInterval(e),l.t.saveLastSyncInfo(t),c(t),h(t),s(e=>({...e,isRunning:!1,percentage:100,completedRepos:e.totalRepos}))}catch(t){s(e=>({...e,isRunning:!1,errors:[...e.errors,t instanceof Error?t.message:"Unknown error"]}))}}},disabled:e.isRunning,className:`px-6 py-3 rounded-lg font-medium transition-all ${e.isRunning?"bg-gray-600 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 active:scale-95"} text-white`,children:e.isRunning?(0,n.jsxs)("span",{className:"flex items-center",children:[(0,n.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,n.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,n.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Syncing..."]}):"\ud83d\udd04 Start Sync"})]}),(e.isRunning||e.percentage>0)&&(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-400 mb-2",children:[(0,n.jsxs)("span",{children:[e.completedRepos," / ",e.totalRepos," repositories"]}),(0,n.jsxs)("span",{children:[e.percentage,"%"]})]}),(0,n.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-3 overflow-hidden",children:(0,n.jsx)("div",{className:"bg-blue-500 h-full transition-all duration-300 ease-out",style:{width:`${e.percentage}%`}})}),e.currentRepo&&(0,n.jsxs)("p",{className:"text-sm text-gray-400 mt-2",children:["Currently syncing: ",(0,n.jsx)("span",{className:"text-white",children:e.currentRepo})]})]}),e.errors.length>0&&(0,n.jsxs)("div",{className:"bg-red-900/20 border border-red-800 rounded-lg p-4 mt-4",children:[(0,n.jsx)("h3",{className:"text-red-400 font-semibold mb-2",children:"Errors encountered:"}),(0,n.jsx)("ul",{className:"text-sm text-red-300 space-y-1",children:e.errors.map((e,s)=>(0,n.jsxs)("li",{children:["\u2022 ",e]},s))})]})]}),t&&(0,n.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Last Sync Results"}),(0,n.jsxs)("button",{onClick:()=>d(!o),className:"text-blue-400 hover:text-blue-300 text-sm",children:[o?"Hide":"Show"," Details"]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,n.jsxs)("div",{className:"bg-gray-700/50 rounded-lg p-4",children:[(0,n.jsx)("p",{className:"text-gray-400 text-sm mb-1",children:"Status"}),(0,n.jsx)("p",{className:"text-lg font-semibold "+(t.success?"text-green-400":"text-red-400"),children:t.success?"\u2705 Success":"\u274c Failed"})]}),(0,n.jsxs)("div",{className:"bg-gray-700/50 rounded-lg p-4",children:[(0,n.jsx)("p",{className:"text-gray-400 text-sm mb-1",children:"Synced Repositories"}),(0,n.jsx)("p",{className:"text-lg font-semibold text-white",children:t.syncedRepositories.length})]}),(0,n.jsxs)("div",{className:"bg-gray-700/50 rounded-lg p-4",children:[(0,n.jsx)("p",{className:"text-gray-400 text-sm mb-1",children:"Duration"}),(0,n.jsx)("p",{className:"text-lg font-semibold text-white",children:(e=>{const s=Math.floor(e/1e3),t=Math.floor(s/60);return t>0?`${t}m ${s%60}s`:`${s}s`})(t.totalTime)})]})]}),o&&(0,n.jsxs)(n.Fragment,{children:[t.syncedRepositories.length>0&&(0,n.jsxs)("div",{className:"mt-6",children:[(0,n.jsxs)("h3",{className:"text-lg font-semibold text-white mb-3",children:["Synced Repositories (",t.syncedRepositories.length,")"]}),(0,n.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:t.syncedRepositories.map(e=>(0,n.jsxs)("div",{className:"bg-gray-700/30 rounded px-3 py-2",children:[(0,n.jsx)("span",{className:"text-green-400 mr-2",children:"\u2713"}),(0,n.jsx)("span",{className:"text-gray-300",children:e})]},e))})]}),t.failedRepositories.length>0&&(0,n.jsxs)("div",{className:"mt-6",children:[(0,n.jsxs)("h3",{className:"text-lg font-semibold text-red-400 mb-3",children:["Failed Repositories (",t.failedRepositories.length,")"]}),(0,n.jsx)("div",{className:"space-y-2",children:t.failedRepositories.map(e=>(0,n.jsxs)("div",{className:"bg-red-900/20 border border-red-800 rounded p-3",children:[(0,n.jsx)("p",{className:"text-red-300 font-medium",children:e.name}),(0,n.jsx)("p",{className:"text-red-400 text-sm mt-1",children:e.error})]},e.name))})]})]})]}),(0,n.jsxs)("div",{className:"mt-8 bg-blue-900/20 border border-blue-800 rounded-lg p-6",children:[(0,n.jsx)("h3",{className:"text-blue-400 font-semibold mb-3",children:"\u2139\ufe0f Sync Information"}),(0,n.jsxs)("ul",{className:"text-blue-300 space-y-2 text-sm",children:[(0,n.jsx)("li",{children:"\u2022 Sync will update all existing repositories and clone any new ones"}),(0,n.jsx)("li",{children:"\u2022 The process may take several minutes depending on repository sizes"}),(0,n.jsx)("li",{children:"\u2022 Failed syncs for individual repositories won't stop the overall process"}),(0,n.jsx)("li",{children:"\u2022 Repositories are automatically synced when the application starts"})]})]})]})}}}]);
//# sourceMappingURL=864.6bf3343e.chunk.js.map